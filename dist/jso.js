!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.jso=t():e.jso=t()}(self,(function(){return(()=>{var e={8897:(e,t,r)=>{"use strict";r.r(t),r.d(t,{BasicLoader:()=>f,Fetcher:()=>G,FetcherJQuery:()=>Y,HTTPRedirect:()=>g,IFrameActive:()=>R,IFramePassive:()=>S,JSO:()=>ye,Popup:()=>M}),r(6699),r(1539),r(8674),r(7727),r(8783),r(3948);var n=r(9116),o=r.n(n),i={epoch:function(){return Math.round((new Date).getTime()/1e3)},debug:!1,uuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))},getResponseFromURL:function(e){return-1!==e.indexOf("#")?i.parseQueryString(e.substring(e.indexOf("#")+1)):-1!==e.indexOf("?")?i.parseQueryString(e.substring(e.indexOf("?")+1)):{}},parseQueryString:function(e){for(var t,r=/\+/g,n=/([^&;=]+)=?([^&;]*)/g,o=function(e){return decodeURIComponent(e.replace(r," "))},i=e,c={};t=n.exec(i);)c[o(t[1])]=o(t[2]);return c},scopeList:function(e){return i.uniqueList(e).join(" ")},uniqueList:function(e){for(var t={},r=[],n=0;n<e.length;n++)t[e[n]]=1;for(var o in t)t.hasOwnProperty(o)&&r.push(o);return r},log:function(e){if(console&&console.log&&i.debug){var t=Array.prototype.slice.call(arguments);t.unshift("[JSO]"),console.log.apply(console,t)}},encodeQS:function(e){var t,r="",n=0;for(t in e)r+=(0==n++?"":"&")+encodeURIComponent(t)+"="+encodeURIComponent(e[t]);return r},encodeURL:function(e,t){var r,n=e,o=0,i=-1===e.indexOf("?")?"?":"&";for(r in t)n+=(0==o++?i:"&")+encodeURIComponent(r)+"="+encodeURIComponent(t[r]);return n},sha256Hash:function(e){return window.crypto.subtle.digest("SHA-256",(new TextEncoder).encode(e))},encode64:function(e){return btoa(new Uint8Array(e).reduce((function(e,t){return e+String.fromCharCode(t)}),""))},base64UrlSafeEncode:function(e){return i.encode64(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")},getCodeChallenge:function(e){return i.sha256Hash(e).then((function(e){return i.base64UrlSafeEncode(e)})).catch((function(e){i.log(e)})).finally((function(){return null}))}};const c=i;function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}const a=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r;return t=e,(r=[{key:"saveState",value:function(e,t){localStorage.setItem("state-"+e,JSON.stringify(t))}},{key:"getState",value:function(e){var t=JSON.parse(localStorage.getItem("state-"+e));return localStorage.removeItem("state-"+e),t}},{key:"hasScope",value:function(e,t){var r;if(!e.scopes)return!1;for(r=0;r<e.scopes.length;r++)if(e.scopes[r]===t)return!0;return!1}},{key:"filterTokens",value:function(e,t){var r,n,o,i=[],u=c.epoch();for(t||(t=[]),r=0;r<e.length;r++){for(o=!0,e[r].expires&&e[r].expires<u+1&&(o=!1),n=0;n<t.length;n++)this.hasScope(e[r],t[n])||(o=!1);o&&i.push(e[r])}return i}},{key:"saveTokens",value:function(e,t){localStorage.setItem("tokens-"+e,JSON.stringify(t))}},{key:"getTokens",value:function(e){var t=JSON.parse(localStorage.getItem("tokens-"+e));return t||(t=[]),c.log("Token found when loooking up provider "+e+" in store "+window.location.href,t),t}},{key:"wipeTokens",value:function(e){localStorage.removeItem("tokens-"+e)}},{key:"saveToken",value:function(e,t){var r=this.getTokens(e);(r=this.filterTokens(r)).push(t),this.saveTokens(e,r)}},{key:"getToken",value:function(e,t){var r=this.getTokens(e);return(r=this.filterTokens(r,t)).length<1?null:r[0]}}])&&u(t.prototype,r),e}());function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var f=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),console.log("Initializing a loader with url "+t),this.url=t}var t,r;return t=e,(r=[{key:"execute",value:function(){}}])&&s(t.prototype,r),e}();function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(c,e);var t,r,n,o,i=(n=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=d(n);if(o){var r=d(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return v(this,e)});function c(){return p(this,c),i.apply(this,arguments)}return t=c,(r=[{key:"execute",value:function(){var e=this;return new Promise((function(t,r){window.location=e.url}))}}])&&h(t.prototype,r),c}(f);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(u,e);var t,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=O(n);if(o){var r=O(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return x(this,e)});function u(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e)).timeout=5e3,t.callback=null,t.isCompleted=!1,t.id="jso_passive_iframe_"+c.uuid();var r=window.addEventListener?"addEventListener":"attachEvent";return window[r],t.iframe=document.createElement("iframe"),t.iframe.setAttribute("id",t.id),t.iframe.setAttribute("src",e),t.iframe.addEventListener("load",(function(e){var r=null;try{if(t.iframe.contentWindow.location.hash){var n=t.iframe.contentWindow.location.hash.substring(1);r=c.parseQueryString(n)}else if(t.iframe.contentWindow.location.search){var o=t.iframe.contentWindow.location.search.substring(1);r=c.parseQueryString(o)}null!==r?t._completed(r):t._failed(new Error("Failed to obtain response value from iframe"))}catch(e){}})),t}return t=u,(r=[{key:"execute",value:function(){var e=this;return new Promise((function(t,r){e.callback=t,e.errorCallback=r,document.getElementsByTagName("body")[0].appendChild(e.iframe),setTimeout((function(){e._failed(new Error("Loading iframe timed out"))}),e.timeout)}))}},{key:"_cleanup",value:function(){var e=document.getElementById(this.id);e.parentNode.removeChild(e)}},{key:"_failed",value:function(e){this.isCompleted||(this.errorCallback&&"function"==typeof this.errorCallback&&this.errorCallback(e),this.isCompleted=!0,this._cleanup())}},{key:"_completed",value:function(e){this.isCompleted||(this.callback&&"function"==typeof this.callback&&this.callback(e),this.isCompleted=!0,this._cleanup())}}])&&m(t.prototype,r),u}(f);function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(c,e);var t,r,n,o,i=(n=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=E(n);if(o){var r=E(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return T(this,e)});function c(){return j(this,c),i.apply(this,arguments)}return t=c,(r=[{key:"execute",value:function(){var e=this;return new Promise((function(t,r){var n=document.getElementById("jsoActiveIframe");n.addEventListener("load",(function(){n.contentWindow;try{n.contentWindow.postMessage("JSO",window.location.origin)}catch(e){}}),!0),window.addEventListener("message",(function(e){if(e.origin==location.origin){var r=e.data.toString();-1!=r.indexOf("?code=")&&t(r)}}),!1),n.setAttribute("src",e.url),window.focus&&n.contentWindow&&n.contentWindow.focus()}))}}])&&_(t.prototype,r),c}(f);function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e,t){return!t||"object"!==C(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var M=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(c,e);var t,r,n,o,i=(n=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=q(n);if(o){var r=q(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return D(this,e)});function c(){return I(this,c),i.apply(this,arguments)}return t=c,(r=[{key:"execute",value:function(){var e=this;return new Promise((function(t,r){window.popupCompleted=function(){var e=n.location.href;t(e)};var n=window.open(e.url,"jso-popup-auth","height=600,width=800");if(null===n)throw new Error("Error loading popup window");window.focus&&n.focus()}))}}])&&A(t.prototype,r),c}(f);function V(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var z=function(){function e(t){for(var r in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t)this[r]=t[r]}var t,r;return t=e,(r=[{key:"set",value:function(e,t){return this[e]=t,this}}])&&V(t.prototype,r),e}();function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U(e,t){return(U=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function J(e,t){return!t||"object"!==F(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var W=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&U(e,t)}(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=H(t);if(r){var o=H(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return J(this,e)});function o(){return N(this,o),n.apply(this,arguments)}return o}(z);function B(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var G=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.jso=t}var t,r;return t=e,(r=[{key:"_fetch",value:function(e,t){return fetch(e,t).then((function(e){if(401===e.status)throw new W;return e}))}},{key:"fetch",value:function(e,t,r){var n=this;if((r=r||0)>2)throw new Error("Reccursion error. Expired tokens deleted and tried again multiple times.");var o={},i={mode:"cors"};return t&&(i=t,Object.assign(i,t)),t&&t.jso&&Object.assign(o,t.jso),this.jso.getToken(o).catch((function(e){console.error("Error fetching token to use ",e)})).then((function(o){return i.headers||(i.headers={}),i.headers.Authorization="Bearer "+o.access_token,n._fetch(e,i).catch((function(o){if(o instanceof W)return console.error("Token was expired. Deleting all tokens for this provider and get a new one",o),n.jso.wipeTokens(),n.fetch(e,t,r+1)}))}))}}])&&B(t.prototype,r),e}();function Q(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Y=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.jso=t,this.jquery=r}var t,r;return t=e,(r=[{key:"_fetch",value:function(e,t){var r=this;return new Promise((function(n,o){return t.done=n,t.fail=function(e,t,n){return 401===parseInt(t,10)?(r.jso.wipeTokens(),o(new W)):o(n)},r.jquery.ajax(e,t)}))}},{key:"fetch",value:function(e,t,r){var n=this;if((r=r||0)>2)throw new Error("Reccursion error. Expired tokens deleted and tried again multiple times.");var o={},i={mode:"cors"};return t&&(i=t,Object.assign(i,t)),t&&t.jso&&Object.assign(o,t.jso),this.jso.getToken(o).catch((function(e){console.error("Error fetching token to use ",e)})).then((function(o){return i.headers||(i.headers={}),i.headers.Authorization="Bearer "+o.access_token,n._fetch(e,i).catch((function(o){if(o instanceof W)return console.error("Token was expired. Deleting all tokens for this provider and get a new one",o),n.jso.wipeTokens(),n.fetch(e,t,r+1)}))}))}}])&&Q(t.prototype,r),e}();function K(e){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Z(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function $(e,t){return($=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ee(e,t){return!t||"object"!==K(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function te(e){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var re=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$(e,t)}(c,e);var t,r,n,o,i=(n=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=te(n);if(o){var r=te(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return ee(this,e)});function c(){return X(this,c),i.apply(this,arguments)}return t=c,(r=[{key:"toString",value:function(){return"OAuthResponseError: ["+(this.error||"unknown")+"]: "+(this.error_description||"unknown")}}])&&Z(t.prototype,r),c}(z);function ne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ie=function(){function e(){ne(this,e),this.config={};for(var t=0;t<arguments.length;t++)Object.assign(this.config,arguments[t])}var t,r;return t=e,(r=[{key:"has",value:function(e){var t=this.config,r=e.split("."),n=0;for(n=0;n<r.length;n++){if(!t.hasOwnProperty(r[n]))return!1;t=t[r[n]]}return!0}},{key:"getValue",value:function(e,t,r){r=r||!1;var n=this.config,o=e.split("."),i=0;for(i=0;i<o.length;i++){if(!n.hasOwnProperty(o[i])){n=void 0;break}n=n[o[i]]}if(void 0===n){if(r)throw new Error("Configuration option ["+o[i]+"] required but not provided.");return t}return n}}])&&oe(t.prototype,r),e}();function ce(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ue=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r;return t=e,(r=[{key:"on",value:function(e,t){this._callbacks||(this._callbacks={}),this._callbacks[e]||(this._callbacks[e]=[]),this._callbacks[e].push(t)}},{key:"emit",value:function(e){this._callbacks||(this._callbacks={}),this._callbacks[e]||(this._callbacks[e]=[]);for(var t=Array.prototype.slice.call(arguments,1),r=0;r<this._callbacks[e].length;r++)this._callbacks[e][r].apply(this,t)}}])&&ce(t.prototype,r),e}();function ae(e){return(ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function se(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function fe(e,t){return(fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function le(e,t){return!t||"object"!==ae(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pe(e){return(pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r(306);var he={lifetime:3600},ye=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fe(e,t)}(s,e);var t,r,n,i,u=(n=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=pe(n);if(i){var r=pe(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return le(this,e)});function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=u.call(this)).configure(e),t.providerID=t.getProviderID(),t.Loader=g,t.store=a,t.callbacks={},t.config.getValue("debug",!1)&&(c.debug=!0),t}return t=s,(r=[{key:"configure",value:function(e){this.config=new ie(he,e)}},{key:"setStore",value:function(e){this.store=e}},{key:"setLoader",value:function(e){if("function"!=typeof e)throw new Error("loader MUST be an instance of the JSO BasicLoader");this.Loader=e}},{key:"getProviderID",value:function(){var e=this.config.getValue("providerID",null);if(null!==e)return e;var t=this.config.getValue("client_id",null,!0);return this.config.getValue("authorization",null,!0)+"|"+t}},{key:"processTokenResponse",value:function(e){var t;if(!e.state)throw new Error("Could not get state from storage.");if(!(t=this.store.getState(e.state)))throw new Error("Could not retrieve state");if(!t.providerID)throw new Error("Could not get providerid from state");return c.log("processTokenResponse ",e,""),this.processReceivedToken(e,t)}},{key:"processReceivedToken",value:function(e,t){var r=c.epoch();return e.received=r,e.expires_in?(e.expires=r+parseInt(e.expires_in,10),e.expires_in=parseInt(e.expires_in,10)):!1===this.config.getValue("default_lifetime",null)?e.expires=null:this.config.has("permanent_scope")?this.store.hasScope(e,this.config.getValue("permanent_scope"))||(e.expires=null):this.config.has("default_lifetime")?e.expires=r+this.config.getValue("default_lifetime"):e.expires=r+3600,e.scope?(e.scopes=e.scope.split(" "),delete e.scope):t.scopes?e.scopes=t.scopes:e.scopes=[],c.log("processTokenResponse completed ",e,""),this.store.saveToken(t.providerID,e),t.restoreHash?window.location.hash=t.restoreHash:window.location.hash="",e}},{key:"processAuthorizationCodeResponse",value:function(e){var t,r=this;if(console.log(this),this.emit("authorizationCode",e),!e.state)throw new Error("Could not find state paramter from callback.");if(null===(t=this.store.getState(e.state)))throw new Error("Could not find retrieve state object.");if(console.log("state",t),this.config.has("token")){var n=new Headers;n.append("Content-Type","application/x-www-form-urlencoded");var o={grant_type:"authorization_code",client_id:this.config.getValue("client_id"),code:e.code};this.config.getValue("use_pkce",!1)&&(o.code_verifier=t.code_verifier),t.hasOwnProperty("redirect_uri")&&(o.redirect_uri=t.redirect_uri);var i={mode:"cors",headers:n,method:"POST",body:c.encodeQS(o)};return fetch(this.config.getValue("token"),i).then((function(e){return e.json()})).then((function(e){return c.log("Received response on token endpoint ",e,""),r.processReceivedToken(e,t)}))}c.log("Received an authorization code. Will not process it as the config option [token] endpoint is not set. If you would like to process the code yourself, please subscribe to the [authorizationCode] event")}},{key:"processErrorResponse",value:function(e){var t;if(!e.state)throw new Error("Could not get [state] and no default providerid is provided.");if(!(t=this.store.getState(e.state)))throw new Error("Could not retrieve state");if(!t.providerID)throw new Error("Could not get providerid from state");return t.restoreHash?window.location.hash=t.restoreHash:window.location.hash="",new re(e)}},{key:"callback",value:function(e){var t=null;if("object"===ae(e))t=e;else if("string"==typeof e)t=c.getResponseFromURL(e);else{if(void 0!==e)return;t=c.getResponseFromURL(window.location.href)}if(c.log("Receving response in callback",t),t.hasOwnProperty("access_token"))return this.processTokenResponse(t);if(t.hasOwnProperty("code"))return this.processAuthorizationCodeResponse(t);if(t.hasOwnProperty("error"))throw this.processErrorResponse(t)}},{key:"dump",value:function(){var e=this.store.getTokens(this.providerID);return{providerID:this.providerID,tokens:e,config:this.config}}},{key:"_getRequestScopes",value:function(e){var t,r=[];if(this.config.has("scopes.request")){var n=this.config.getValue("scopes.request");for(t=0;t<n.length;t++)r.push(n[t])}if(e&&e.scopes&&e.scopes.request)for(t=0;t<e.scopes.request.length;t++)r.push(e.scopes.request[t]);return c.uniqueList(r)}},{key:"_getRequiredScopes",value:function(e){var t,r=[];if(this.config.has("scopes.require")){var n=this.config.getValue("scopes.require");for(t=0;t<n.length;t++)r.push(n[t])}if(e&&e.scopes&&e.scopes.require)for(t=0;t<e.scopes.require.length;t++)r.push(e.scopes.require[t]);return c.uniqueList(r)}},{key:"getToken",value:function(e){var t=this;return e=e||{},new Promise((function(r,n){var o=t._getRequiredScopes(e),i=t.store.getToken(t.providerID,o);if(i)return r(i);if(e.hasOwnProperty("allowredir")&&!e.allowredir)throw new Error("Cannot obtain a token, when not allowed to redirect...");r(t._authorize(e))}))}},{key:"checkToken",value:function(e){var t=this._getRequiredScopes(e);return this.store.getToken(this.providerID,t)}},{key:"_authorize2",value:function(e,t,r,n){var o=this,i=this.config.getValue("authorization",null,!0);c.log("Debug Authentication request object",JSON.stringify(t,void 0,2));var u=c.encodeURL(i,t);this.config.getValue("use_pkce",!1)&&(t.code_verifier=r),window.location.hash&&(t.restoreHash=window.location.hash),t.providerID=this.providerID,n&&(t.scopes=n),c.log("Saving state ["+t.state+"]"),c.log(JSON.parse(JSON.stringify(t)));var a=this.Loader;return e.hasOwnProperty("loader")&&(a=e.loader),c.log("Looking for loader",e,a),this.store.saveState(t.state,t),this.gotoAuthorizeURL(u,a).then((function(e){if(!0!==e)return o.callback(e)}))}},{key:"_authorize",value:function(e){var t,r,n=this;return Promise.resolve().then((function(){var i,u=n.config.getValue("authorization",null,!0),a=n.config.getValue("client_id",null,!0);if(e.hasOwnProperty("allowia")||n.config.has("allowia"))throw new Error('The allowia option was removed in JSO 4.1.0. Instead use {request: {prompt: "none"}}');if(c.log("About to send an authorization request to this endpoint",u),c.log("Options",e),t={},n.config.has("request")){var s=n.config.getValue("request");t=o()(t,s)}if(e.hasOwnProperty("request")&&(t=o()(t,e.request)),t.response_type=e.response_type||n.config.getValue("response_type","id_token token"),t.state=c.uuid(),n.config.has("redirect_uri")&&(t.redirect_uri=n.config.getValue("redirect_uri","")),e.redirect_uri&&(t.redirect_uri=e.redirect_uri),t.client_id=a,i=(r=n._getRequestScopes(e)).includes("openid"),r.length>0&&(t.scope=c.scopeList(r)),c.log("Running in mode: "+(i?"OpenID Connect mode":"OAuth mode")),i&&!t.hasOwnProperty("redirect_uri"))throw new Error("An OpenID Request requires a redirect_uri to be set. Please add to configuration. A redirect_uri is not required for plain OAuth");i&&(t.nonce=c.uuid());var f=null;if(!n.config.getValue("use_pkce",!1))return n._authorize2(e,t,f,r);if(!window.crypto)throw new Error("Browser crypto APIs are not available");var l=new Uint8Array(64);window.crypto.getRandomValues(l),f=c.base64UrlSafeEncode(l),c.getCodeChallenge(f).then((function(o){return t.code_challenge=o,t.code_challenge_method="S256",n._authorize2(e,t,f,r)}))}))}},{key:"gotoAuthorizeURL",value:function(e,t){return new Promise((function(r,n){if(null!==t&&"function"==typeof t){var o=new t(e);if(!(o instanceof f))throw new Error("JSO selected Loader is not an instance of BasicLoader.");r(o.execute())}else n(new Error("Cannot redirect to authorization endpoint because of missing redirect handler"))}))}},{key:"wipeTokens",value:function(){this.store.wipeTokens(this.providerID)}}])&&se(t.prototype,r),s}(ue)},9116:(e,t,r)=>{r(9601);var n=r(857);e.exports=n.Object.assign},3099:e=>{e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},6077:(e,t,r)=>{var n=r(111);e.exports=function(e){if(!n(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},1223:(e,t,r)=>{var n=r(5112),o=r(30),i=r(3070),c=n("unscopables"),u=Array.prototype;null==u[c]&&i.f(u,c,{configurable:!0,value:o(null)}),e.exports=function(e){u[c][e]=!0}},5787:e=>{e.exports=function(e,t,r){if(!(e instanceof t))throw TypeError("Incorrect "+(r?r+" ":"")+"invocation");return e}},9670:(e,t,r)=>{var n=r(111);e.exports=function(e){if(!n(e))throw TypeError(String(e)+" is not an object");return e}},1318:(e,t,r)=>{var n=r(5656),o=r(7466),i=r(1400),c=function(e){return function(t,r,c){var u,a=n(t),s=o(a.length),f=i(c,s);if(e&&r!=r){for(;s>f;)if((u=a[f++])!=u)return!0}else for(;s>f;f++)if((e||f in a)&&a[f]===r)return e||f||0;return!e&&-1}};e.exports={includes:c(!0),indexOf:c(!1)}},9207:(e,t,r)=>{var n=r(9781),o=r(7293),i=r(6656),c=Object.defineProperty,u={},a=function(e){throw e};e.exports=function(e,t){if(i(u,e))return u[e];t||(t={});var r=[][e],s=!!i(t,"ACCESSORS")&&t.ACCESSORS,f=i(t,0)?t[0]:a,l=i(t,1)?t[1]:void 0;return u[e]=!!r&&!o((function(){if(s&&!n)return!0;var e={length:-1};s?c(e,1,{enumerable:!0,get:a}):e[1]=1,r.call(e,f,l)}))}},7072:(e,t,r)=>{var n=r(5112)("iterator"),o=!1;try{var i=0,c={next:function(){return{done:!!i++}},return:function(){o=!0}};c[n]=function(){return this},Array.from(c,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!o)return!1;var r=!1;try{var i={};i[n]=function(){return{next:function(){return{done:r=!0}}}},e(i)}catch(e){}return r}},4326:e=>{var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},648:(e,t,r)=>{var n=r(1694),o=r(4326),i=r(5112)("toStringTag"),c="Arguments"==o(function(){return arguments}());e.exports=n?o:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),i))?r:c?o(t):"Object"==(n=o(t))&&"function"==typeof t.callee?"Arguments":n}},9920:(e,t,r)=>{var n=r(6656),o=r(3887),i=r(1236),c=r(3070);e.exports=function(e,t){for(var r=o(t),u=c.f,a=i.f,s=0;s<r.length;s++){var f=r[s];n(e,f)||u(e,f,a(t,f))}}},8544:(e,t,r)=>{var n=r(7293);e.exports=!n((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},4994:(e,t,r)=>{"use strict";var n=r(3383).IteratorPrototype,o=r(30),i=r(9114),c=r(8003),u=r(7497),a=function(){return this};e.exports=function(e,t,r){var s=t+" Iterator";return e.prototype=o(n,{next:i(1,r)}),c(e,s,!1,!0),u[s]=a,e}},8880:(e,t,r)=>{var n=r(9781),o=r(3070),i=r(9114);e.exports=n?function(e,t,r){return o.f(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}},9114:e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},654:(e,t,r)=>{"use strict";var n=r(2109),o=r(4994),i=r(9518),c=r(7674),u=r(8003),a=r(8880),s=r(1320),f=r(5112),l=r(1913),p=r(7497),h=r(3383),y=h.IteratorPrototype,v=h.BUGGY_SAFARI_ITERATORS,d=f("iterator"),g="keys",b="values",m="entries",w=function(){return this};e.exports=function(e,t,r,f,h,x,O){o(r,t,f);var S,k,j,_=function(e){if(e===h&&C)return C;if(!v&&e in E)return E[e];switch(e){case g:case b:case m:return function(){return new r(this,e)}}return function(){return new r(this)}},P=t+" Iterator",T=!1,E=e.prototype,R=E[d]||E["@@iterator"]||h&&E[h],C=!v&&R||_(h),I="Array"==t&&E.entries||R;if(I&&(S=i(I.call(new e)),y!==Object.prototype&&S.next&&(l||i(S)===y||(c?c(S,y):"function"!=typeof S[d]&&a(S,d,w)),u(S,P,!0,!0),l&&(p[P]=w))),h==b&&R&&R.name!==b&&(T=!0,C=function(){return R.call(this)}),l&&!O||E[d]===C||a(E,d,C),p[t]=C,h)if(k={values:_(b),keys:x?C:_(g),entries:_(m)},O)for(j in k)(v||T||!(j in E))&&s(E,j,k[j]);else n({target:t,proto:!0,forced:v||T},k);return k}},9781:(e,t,r)=>{var n=r(7293);e.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},317:(e,t,r)=>{var n=r(7854),o=r(111),i=n.document,c=o(i)&&o(i.createElement);e.exports=function(e){return c?i.createElement(e):{}}},8324:e=>{e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},6833:(e,t,r)=>{var n=r(8113);e.exports=/(iphone|ipod|ipad).*applewebkit/i.test(n)},5268:(e,t,r)=>{var n=r(4326),o=r(7854);e.exports="process"==n(o.process)},8113:(e,t,r)=>{var n=r(5005);e.exports=n("navigator","userAgent")||""},7392:(e,t,r)=>{var n,o,i=r(7854),c=r(8113),u=i.process,a=u&&u.versions,s=a&&a.v8;s?o=(n=s.split("."))[0]+n[1]:c&&(!(n=c.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=c.match(/Chrome\/(\d+)/))&&(o=n[1]),e.exports=o&&+o},748:e=>{e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2109:(e,t,r)=>{var n=r(7854),o=r(1236).f,i=r(8880),c=r(1320),u=r(3505),a=r(9920),s=r(4705);e.exports=function(e,t){var r,f,l,p,h,y=e.target,v=e.global,d=e.stat;if(r=v?n:d?n[y]||u(y,{}):(n[y]||{}).prototype)for(f in t){if(p=t[f],l=e.noTargetGet?(h=o(r,f))&&h.value:r[f],!s(v?f:y+(d?".":"#")+f,e.forced)&&void 0!==l){if(typeof p==typeof l)continue;a(p,l)}(e.sham||l&&l.sham)&&i(p,"sham",!0),c(r,f,p,e)}}},7293:e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},9974:(e,t,r)=>{var n=r(3099);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 0:return function(){return e.call(t)};case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,o){return e.call(t,r,n,o)}}return function(){return e.apply(t,arguments)}}},5005:(e,t,r)=>{var n=r(857),o=r(7854),i=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?i(n[e])||i(o[e]):n[e]&&n[e][t]||o[e]&&o[e][t]}},1246:(e,t,r)=>{var n=r(648),o=r(7497),i=r(5112)("iterator");e.exports=function(e){if(null!=e)return e[i]||e["@@iterator"]||o[n(e)]}},7854:(e,t,r)=>{var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof r.g&&r.g)||function(){return this}()||Function("return this")()},6656:e=>{var t={}.hasOwnProperty;e.exports=function(e,r){return t.call(e,r)}},3501:e=>{e.exports={}},842:(e,t,r)=>{var n=r(7854);e.exports=function(e,t){var r=n.console;r&&r.error&&(1===arguments.length?r.error(e):r.error(e,t))}},490:(e,t,r)=>{var n=r(5005);e.exports=n("document","documentElement")},4664:(e,t,r)=>{var n=r(9781),o=r(7293),i=r(317);e.exports=!n&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},8361:(e,t,r)=>{var n=r(7293),o=r(4326),i="".split;e.exports=n((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==o(e)?i.call(e,""):Object(e)}:Object},2788:(e,t,r)=>{var n=r(5465),o=Function.toString;"function"!=typeof n.inspectSource&&(n.inspectSource=function(e){return o.call(e)}),e.exports=n.inspectSource},9909:(e,t,r)=>{var n,o,i,c=r(8536),u=r(7854),a=r(111),s=r(8880),f=r(6656),l=r(5465),p=r(6200),h=r(3501),y=u.WeakMap;if(c){var v=l.state||(l.state=new y),d=v.get,g=v.has,b=v.set;n=function(e,t){return t.facade=e,b.call(v,e,t),t},o=function(e){return d.call(v,e)||{}},i=function(e){return g.call(v,e)}}else{var m=p("state");h[m]=!0,n=function(e,t){return t.facade=e,s(e,m,t),t},o=function(e){return f(e,m)?e[m]:{}},i=function(e){return f(e,m)}}e.exports={set:n,get:o,has:i,enforce:function(e){return i(e)?o(e):n(e,{})},getterFor:function(e){return function(t){var r;if(!a(t)||(r=o(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return r}}}},7659:(e,t,r)=>{var n=r(5112),o=r(7497),i=n("iterator"),c=Array.prototype;e.exports=function(e){return void 0!==e&&(o.Array===e||c[i]===e)}},4705:(e,t,r)=>{var n=r(7293),o=/#|\.prototype\./,i=function(e,t){var r=u[c(e)];return r==s||r!=a&&("function"==typeof t?n(t):!!t)},c=i.normalize=function(e){return String(e).replace(o,".").toLowerCase()},u=i.data={},a=i.NATIVE="N",s=i.POLYFILL="P";e.exports=i},111:e=>{e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},1913:e=>{e.exports=!1},408:(e,t,r)=>{var n=r(9670),o=r(7659),i=r(7466),c=r(9974),u=r(1246),a=r(9212),s=function(e,t){this.stopped=e,this.result=t};e.exports=function(e,t,r){var f,l,p,h,y,v,d,g=r&&r.that,b=!(!r||!r.AS_ENTRIES),m=!(!r||!r.IS_ITERATOR),w=!(!r||!r.INTERRUPTED),x=c(t,g,1+b+w),O=function(e){return f&&a(f),new s(!0,e)},S=function(e){return b?(n(e),w?x(e[0],e[1],O):x(e[0],e[1])):w?x(e,O):x(e)};if(m)f=e;else{if("function"!=typeof(l=u(e)))throw TypeError("Target is not iterable");if(o(l)){for(p=0,h=i(e.length);h>p;p++)if((y=S(e[p]))&&y instanceof s)return y;return new s(!1)}f=l.call(e)}for(v=f.next;!(d=v.call(f)).done;){try{y=S(d.value)}catch(e){throw a(f),e}if("object"==typeof y&&y&&y instanceof s)return y}return new s(!1)}},9212:(e,t,r)=>{var n=r(9670);e.exports=function(e){var t=e.return;if(void 0!==t)return n(t.call(e)).value}},3383:(e,t,r)=>{"use strict";var n,o,i,c=r(9518),u=r(8880),a=r(6656),s=r(5112),f=r(1913),l=s("iterator"),p=!1;[].keys&&("next"in(i=[].keys())?(o=c(c(i)))!==Object.prototype&&(n=o):p=!0),null==n&&(n={}),f||a(n,l)||u(n,l,(function(){return this})),e.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:p}},7497:e=>{e.exports={}},5948:(e,t,r)=>{var n,o,i,c,u,a,s,f,l=r(7854),p=r(1236).f,h=r(261).set,y=r(6833),v=r(5268),d=l.MutationObserver||l.WebKitMutationObserver,g=l.document,b=l.process,m=l.Promise,w=p(l,"queueMicrotask"),x=w&&w.value;x||(n=function(){var e,t;for(v&&(e=b.domain)&&e.exit();o;){t=o.fn,o=o.next;try{t()}catch(e){throw o?c():i=void 0,e}}i=void 0,e&&e.enter()},!y&&!v&&d&&g?(u=!0,a=g.createTextNode(""),new d(n).observe(a,{characterData:!0}),c=function(){a.data=u=!u}):m&&m.resolve?(s=m.resolve(void 0),f=s.then,c=function(){f.call(s,n)}):c=v?function(){b.nextTick(n)}:function(){h.call(l,n)}),e.exports=x||function(e){var t={fn:e,next:void 0};i&&(i.next=t),o||(o=t,c()),i=t}},3366:(e,t,r)=>{var n=r(7854);e.exports=n.Promise},133:(e,t,r)=>{var n=r(7293);e.exports=!!Object.getOwnPropertySymbols&&!n((function(){return!String(Symbol())}))},8536:(e,t,r)=>{var n=r(7854),o=r(2788),i=n.WeakMap;e.exports="function"==typeof i&&/native code/.test(o(i))},8523:(e,t,r)=>{"use strict";var n=r(3099),o=function(e){var t,r;this.promise=new e((function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n})),this.resolve=n(t),this.reject=n(r)};e.exports.f=function(e){return new o(e)}},1574:(e,t,r)=>{"use strict";var n=r(9781),o=r(7293),i=r(1956),c=r(5181),u=r(5296),a=r(7908),s=r(8361),f=Object.assign,l=Object.defineProperty;e.exports=!f||o((function(){if(n&&1!==f({b:1},f(l({},"a",{enumerable:!0,get:function(){l(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},r=Symbol(),o="abcdefghijklmnopqrst";return e[r]=7,o.split("").forEach((function(e){t[e]=e})),7!=f({},e)[r]||i(f({},t)).join("")!=o}))?function(e,t){for(var r=a(e),o=arguments.length,f=1,l=c.f,p=u.f;o>f;)for(var h,y=s(arguments[f++]),v=l?i(y).concat(l(y)):i(y),d=v.length,g=0;d>g;)h=v[g++],n&&!p.call(y,h)||(r[h]=y[h]);return r}:f},30:(e,t,r)=>{var n,o=r(9670),i=r(6048),c=r(748),u=r(3501),a=r(490),s=r(317),f=r(6200)("IE_PROTO"),l=function(){},p=function(e){return"<script>"+e+"<\/script>"},h=function(){try{n=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;h=n?function(e){e.write(p("")),e.close();var t=e.parentWindow.Object;return e=null,t}(n):((t=s("iframe")).style.display="none",a.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(p("document.F=Object")),e.close(),e.F);for(var r=c.length;r--;)delete h.prototype[c[r]];return h()};u[f]=!0,e.exports=Object.create||function(e,t){var r;return null!==e?(l.prototype=o(e),r=new l,l.prototype=null,r[f]=e):r=h(),void 0===t?r:i(r,t)}},6048:(e,t,r)=>{var n=r(9781),o=r(3070),i=r(9670),c=r(1956);e.exports=n?Object.defineProperties:function(e,t){i(e);for(var r,n=c(t),u=n.length,a=0;u>a;)o.f(e,r=n[a++],t[r]);return e}},3070:(e,t,r)=>{var n=r(9781),o=r(4664),i=r(9670),c=r(7593),u=Object.defineProperty;t.f=n?u:function(e,t,r){if(i(e),t=c(t,!0),i(r),o)try{return u(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},1236:(e,t,r)=>{var n=r(9781),o=r(5296),i=r(9114),c=r(5656),u=r(7593),a=r(6656),s=r(4664),f=Object.getOwnPropertyDescriptor;t.f=n?f:function(e,t){if(e=c(e),t=u(t,!0),s)try{return f(e,t)}catch(e){}if(a(e,t))return i(!o.f.call(e,t),e[t])}},8006:(e,t,r)=>{var n=r(6324),o=r(748).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,o)}},5181:(e,t)=>{t.f=Object.getOwnPropertySymbols},9518:(e,t,r)=>{var n=r(6656),o=r(7908),i=r(6200),c=r(8544),u=i("IE_PROTO"),a=Object.prototype;e.exports=c?Object.getPrototypeOf:function(e){return e=o(e),n(e,u)?e[u]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},6324:(e,t,r)=>{var n=r(6656),o=r(5656),i=r(1318).indexOf,c=r(3501);e.exports=function(e,t){var r,u=o(e),a=0,s=[];for(r in u)!n(c,r)&&n(u,r)&&s.push(r);for(;t.length>a;)n(u,r=t[a++])&&(~i(s,r)||s.push(r));return s}},1956:(e,t,r)=>{var n=r(6324),o=r(748);e.exports=Object.keys||function(e){return n(e,o)}},5296:(e,t)=>{"use strict";var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,o=n&&!r.call({1:2},1);t.f=o?function(e){var t=n(this,e);return!!t&&t.enumerable}:r},7674:(e,t,r)=>{var n=r(9670),o=r(6077);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(r,[]),t=r instanceof Array}catch(e){}return function(r,i){return n(r),o(i),t?e.call(r,i):r.__proto__=i,r}}():void 0)},288:(e,t,r)=>{"use strict";var n=r(1694),o=r(648);e.exports=n?{}.toString:function(){return"[object "+o(this)+"]"}},3887:(e,t,r)=>{var n=r(5005),o=r(8006),i=r(5181),c=r(9670);e.exports=n("Reflect","ownKeys")||function(e){var t=o.f(c(e)),r=i.f;return r?t.concat(r(e)):t}},857:(e,t,r)=>{var n=r(7854);e.exports=n},2534:e=>{e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},9478:(e,t,r)=>{var n=r(9670),o=r(111),i=r(8523);e.exports=function(e,t){if(n(e),o(t)&&t.constructor===e)return t;var r=i.f(e);return(0,r.resolve)(t),r.promise}},2248:(e,t,r)=>{var n=r(1320);e.exports=function(e,t,r){for(var o in t)n(e,o,t[o],r);return e}},1320:(e,t,r)=>{var n=r(7854),o=r(8880),i=r(6656),c=r(3505),u=r(2788),a=r(9909),s=a.get,f=a.enforce,l=String(String).split("String");(e.exports=function(e,t,r,u){var a,s=!!u&&!!u.unsafe,p=!!u&&!!u.enumerable,h=!!u&&!!u.noTargetGet;"function"==typeof r&&("string"!=typeof t||i(r,"name")||o(r,"name",t),(a=f(r)).source||(a.source=l.join("string"==typeof t?t:""))),e!==n?(s?!h&&e[t]&&(p=!0):delete e[t],p?e[t]=r:o(e,t,r)):p?e[t]=r:c(t,r)})(Function.prototype,"toString",(function(){return"function"==typeof this&&s(this).source||u(this)}))},4488:e=>{e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},3505:(e,t,r)=>{var n=r(7854),o=r(8880);e.exports=function(e,t){try{o(n,e,t)}catch(r){n[e]=t}return t}},6340:(e,t,r)=>{"use strict";var n=r(5005),o=r(3070),i=r(5112),c=r(9781),u=i("species");e.exports=function(e){var t=n(e),r=o.f;c&&t&&!t[u]&&r(t,u,{configurable:!0,get:function(){return this}})}},8003:(e,t,r)=>{var n=r(3070).f,o=r(6656),i=r(5112)("toStringTag");e.exports=function(e,t,r){e&&!o(e=r?e:e.prototype,i)&&n(e,i,{configurable:!0,value:t})}},6200:(e,t,r)=>{var n=r(2309),o=r(9711),i=n("keys");e.exports=function(e){return i[e]||(i[e]=o(e))}},5465:(e,t,r)=>{var n=r(7854),o=r(3505),i="__core-js_shared__",c=n[i]||o(i,{});e.exports=c},2309:(e,t,r)=>{var n=r(1913),o=r(5465);(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.8.0",mode:n?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},6707:(e,t,r)=>{var n=r(9670),o=r(3099),i=r(5112)("species");e.exports=function(e,t){var r,c=n(e).constructor;return void 0===c||null==(r=n(c)[i])?t:o(r)}},8710:(e,t,r)=>{var n=r(9958),o=r(4488),i=function(e){return function(t,r){var i,c,u=String(o(t)),a=n(r),s=u.length;return a<0||a>=s?e?"":void 0:(i=u.charCodeAt(a))<55296||i>56319||a+1===s||(c=u.charCodeAt(a+1))<56320||c>57343?e?u.charAt(a):i:e?u.slice(a,a+2):c-56320+(i-55296<<10)+65536}};e.exports={codeAt:i(!1),charAt:i(!0)}},261:(e,t,r)=>{var n,o,i,c=r(7854),u=r(7293),a=r(9974),s=r(490),f=r(317),l=r(6833),p=r(5268),h=c.location,y=c.setImmediate,v=c.clearImmediate,d=c.process,g=c.MessageChannel,b=c.Dispatch,m=0,w={},x=function(e){if(w.hasOwnProperty(e)){var t=w[e];delete w[e],t()}},O=function(e){return function(){x(e)}},S=function(e){x(e.data)},k=function(e){c.postMessage(e+"",h.protocol+"//"+h.host)};y&&v||(y=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return w[++m]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},n(m),m},v=function(e){delete w[e]},p?n=function(e){d.nextTick(O(e))}:b&&b.now?n=function(e){b.now(O(e))}:g&&!l?(i=(o=new g).port2,o.port1.onmessage=S,n=a(i.postMessage,i,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts&&h&&"file:"!==h.protocol&&!u(k)?(n=k,c.addEventListener("message",S,!1)):n="onreadystatechange"in f("script")?function(e){s.appendChild(f("script")).onreadystatechange=function(){s.removeChild(this),x(e)}}:function(e){setTimeout(O(e),0)}),e.exports={set:y,clear:v}},1400:(e,t,r)=>{var n=r(9958),o=Math.max,i=Math.min;e.exports=function(e,t){var r=n(e);return r<0?o(r+t,0):i(r,t)}},5656:(e,t,r)=>{var n=r(8361),o=r(4488);e.exports=function(e){return n(o(e))}},9958:e=>{var t=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:t)(e)}},7466:(e,t,r)=>{var n=r(9958),o=Math.min;e.exports=function(e){return e>0?o(n(e),9007199254740991):0}},7908:(e,t,r)=>{var n=r(4488);e.exports=function(e){return Object(n(e))}},7593:(e,t,r)=>{var n=r(111);e.exports=function(e,t){if(!n(e))return e;var r,o;if(t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;if("function"==typeof(r=e.valueOf)&&!n(o=r.call(e)))return o;if(!t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},1694:(e,t,r)=>{var n={};n[r(5112)("toStringTag")]="z",e.exports="[object z]"===String(n)},9711:e=>{var t=0,r=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++t+r).toString(36)}},3307:(e,t,r)=>{var n=r(133);e.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},5112:(e,t,r)=>{var n=r(7854),o=r(2309),i=r(6656),c=r(9711),u=r(133),a=r(3307),s=o("wks"),f=n.Symbol,l=a?f:f&&f.withoutSetter||c;e.exports=function(e){return i(s,e)||(u&&i(f,e)?s[e]=f[e]:s[e]=l("Symbol."+e)),s[e]}},6699:(e,t,r)=>{"use strict";var n=r(2109),o=r(1318).includes,i=r(1223);n({target:"Array",proto:!0,forced:!r(9207)("indexOf",{ACCESSORS:!0,1:0})},{includes:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),i("includes")},6992:(e,t,r)=>{"use strict";var n=r(5656),o=r(1223),i=r(7497),c=r(9909),u=r(654),a="Array Iterator",s=c.set,f=c.getterFor(a);e.exports=u(Array,"Array",(function(e,t){s(this,{type:a,target:n(e),index:0,kind:t})}),(function(){var e=f(this),t=e.target,r=e.kind,n=e.index++;return!t||n>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==r?{value:n,done:!1}:"values"==r?{value:t[n],done:!1}:{value:[n,t[n]],done:!1}}),"values"),i.Arguments=i.Array,o("keys"),o("values"),o("entries")},9601:(e,t,r)=>{var n=r(2109),o=r(1574);n({target:"Object",stat:!0,forced:Object.assign!==o},{assign:o})},1539:(e,t,r)=>{var n=r(1694),o=r(1320),i=r(288);n||o(Object.prototype,"toString",i,{unsafe:!0})},7727:(e,t,r)=>{"use strict";var n=r(2109),o=r(1913),i=r(3366),c=r(7293),u=r(5005),a=r(6707),s=r(9478),f=r(1320);n({target:"Promise",proto:!0,real:!0,forced:!!i&&c((function(){i.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=a(this,u("Promise")),r="function"==typeof e;return this.then(r?function(r){return s(t,e()).then((function(){return r}))}:e,r?function(r){return s(t,e()).then((function(){throw r}))}:e)}}),o||"function"!=typeof i||i.prototype.finally||f(i.prototype,"finally",u("Promise").prototype.finally)},8674:(e,t,r)=>{"use strict";var n,o,i,c,u=r(2109),a=r(1913),s=r(7854),f=r(5005),l=r(3366),p=r(1320),h=r(2248),y=r(8003),v=r(6340),d=r(111),g=r(3099),b=r(5787),m=r(2788),w=r(408),x=r(7072),O=r(6707),S=r(261).set,k=r(5948),j=r(9478),_=r(842),P=r(8523),T=r(2534),E=r(9909),R=r(4705),C=r(5112),I=r(5268),A=r(7392),L=C("species"),D="Promise",q=E.get,M=E.set,V=E.getterFor(D),z=l,F=s.TypeError,N=s.document,U=s.process,J=f("fetch"),H=P.f,W=H,B=!!(N&&N.createEvent&&s.dispatchEvent),G="function"==typeof PromiseRejectionEvent,Q="unhandledrejection",Y=R(D,(function(){if(m(z)===String(z)){if(66===A)return!0;if(!I&&!G)return!0}if(a&&!z.prototype.finally)return!0;if(A>=51&&/native code/.test(z))return!1;var e=z.resolve(1),t=function(e){e((function(){}),(function(){}))};return(e.constructor={})[L]=t,!(e.then((function(){}))instanceof t)})),K=Y||!x((function(e){z.all(e).catch((function(){}))})),X=function(e){var t;return!(!d(e)||"function"!=typeof(t=e.then))&&t},Z=function(e,t){if(!e.notified){e.notified=!0;var r=e.reactions;k((function(){for(var n=e.value,o=1==e.state,i=0;r.length>i;){var c,u,a,s=r[i++],f=o?s.ok:s.fail,l=s.resolve,p=s.reject,h=s.domain;try{f?(o||(2===e.rejection&&re(e),e.rejection=1),!0===f?c=n:(h&&h.enter(),c=f(n),h&&(h.exit(),a=!0)),c===s.promise?p(F("Promise-chain cycle")):(u=X(c))?u.call(c,l,p):l(c)):p(n)}catch(e){h&&!a&&h.exit(),p(e)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&ee(e)}))}},$=function(e,t,r){var n,o;B?((n=N.createEvent("Event")).promise=t,n.reason=r,n.initEvent(e,!1,!0),s.dispatchEvent(n)):n={promise:t,reason:r},!G&&(o=s["on"+e])?o(n):e===Q&&_("Unhandled promise rejection",r)},ee=function(e){S.call(s,(function(){var t,r=e.facade,n=e.value;if(te(e)&&(t=T((function(){I?U.emit("unhandledRejection",n,r):$(Q,r,n)})),e.rejection=I||te(e)?2:1,t.error))throw t.value}))},te=function(e){return 1!==e.rejection&&!e.parent},re=function(e){S.call(s,(function(){var t=e.facade;I?U.emit("rejectionHandled",t):$("rejectionhandled",t,e.value)}))},ne=function(e,t,r){return function(n){e(t,n,r)}},oe=function(e,t,r){e.done||(e.done=!0,r&&(e=r),e.value=t,e.state=2,Z(e,!0))},ie=function(e,t,r){if(!e.done){e.done=!0,r&&(e=r);try{if(e.facade===t)throw F("Promise can't be resolved itself");var n=X(t);n?k((function(){var r={done:!1};try{n.call(t,ne(ie,r,e),ne(oe,r,e))}catch(t){oe(r,t,e)}})):(e.value=t,e.state=1,Z(e,!1))}catch(t){oe({done:!1},t,e)}}};Y&&(z=function(e){b(this,z,D),g(e),n.call(this);var t=q(this);try{e(ne(ie,t),ne(oe,t))}catch(e){oe(t,e)}},(n=function(e){M(this,{type:D,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=h(z.prototype,{then:function(e,t){var r=V(this),n=H(O(this,z));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=I?U.domain:void 0,r.parent=!0,r.reactions.push(n),0!=r.state&&Z(r,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new n,t=q(e);this.promise=e,this.resolve=ne(ie,t),this.reject=ne(oe,t)},P.f=H=function(e){return e===z||e===i?new o(e):W(e)},a||"function"!=typeof l||(c=l.prototype.then,p(l.prototype,"then",(function(e,t){var r=this;return new z((function(e,t){c.call(r,e,t)})).then(e,t)}),{unsafe:!0}),"function"==typeof J&&u({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return j(z,J.apply(s,arguments))}}))),u({global:!0,wrap:!0,forced:Y},{Promise:z}),y(z,D,!1,!0),v(D),i=f(D),u({target:D,stat:!0,forced:Y},{reject:function(e){var t=H(this);return t.reject.call(void 0,e),t.promise}}),u({target:D,stat:!0,forced:a||Y},{resolve:function(e){return j(a&&this===i?z:this,e)}}),u({target:D,stat:!0,forced:K},{all:function(e){var t=this,r=H(t),n=r.resolve,o=r.reject,i=T((function(){var r=g(t.resolve),i=[],c=0,u=1;w(e,(function(e){var a=c++,s=!1;i.push(void 0),u++,r.call(t,e).then((function(e){s||(s=!0,i[a]=e,--u||n(i))}),o)})),--u||n(i)}));return i.error&&o(i.value),r.promise},race:function(e){var t=this,r=H(t),n=r.reject,o=T((function(){var o=g(t.resolve);w(e,(function(e){o.call(t,e).then(r.resolve,n)}))}));return o.error&&n(o.value),r.promise}})},8783:(e,t,r)=>{"use strict";var n=r(8710).charAt,o=r(9909),i=r(654),c="String Iterator",u=o.set,a=o.getterFor(c);i(String,"String",(function(e){u(this,{type:c,string:String(e),index:0})}),(function(){var e,t=a(this),r=t.string,o=t.index;return o>=r.length?{value:void 0,done:!0}:(e=n(r,o),t.index+=e.length,{value:e,done:!1})}))},3948:(e,t,r)=>{var n=r(7854),o=r(8324),i=r(6992),c=r(8880),u=r(5112),a=u("iterator"),s=u("toStringTag"),f=i.values;for(var l in o){var p=n[l],h=p&&p.prototype;if(h){if(h[a]!==f)try{c(h,a,f)}catch(e){h[a]=f}if(h[s]||c(h,s,l),o[l])for(var y in i)if(h[y]!==i[y])try{c(h,y,i[y])}catch(e){h[y]=i[y]}}}},306:e=>{"use strict";e.exports=JSON.parse('{"name":"jso","version":"4.1.2","description":"OAuth 2.0 implementation in Javascript","main":"dist/jso.js","module":"src/JSO.js","scripts":{"test":"true","preversion":"npm test","version":"npm run build && git add -A dist","postversion":"git push && git push --tags && npm publish","build":"webpack --mode production --config webpack.config.js"},"repository":{"type":"git","url":"https://github.com/vrseraphin/jso.git"},"keywords":["oauth","authentication","authorization","rest","api","ajax","jquery"],"files":["src"],"eslintConfig":{"env":{"es6":true,"browser":true,"node":false}},"devDependencies":{"@babel/core":"^7.12.9","@babel/preset-env":"^7.12.7","@babel/preset-react":"^7.12.7","@babel/preset-typescript":"^7.12.7","@babel/runtime":"^7.12.5","babel-loader":"^8.2.2","qunit":"^2.13.0","webpack":"^5.10.0","webpack-cli":"^4.2.0"},"author":"Andreas Åkre Solberg","license":"LGPL-2.1","bugs":{"url":"https://github.com/andreassolberg/jso/issues"},"homepage":"https://github.com/andreassolberg/jso","dependencies":{"core-js":"^3.8.0"}}')}},t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}return r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r(8897)})()}));
//# sourceMappingURL=jso.js.map